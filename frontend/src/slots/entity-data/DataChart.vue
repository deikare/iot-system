<template>
  <div>
    <canvas id="dataseries-chart" height="100%"></canvas>
  </div>
</template>

<script>
import Chart from "chart.js/auto";
// import { enUS } from "date-fns/locale";
import "chartjs-adapter-luxon";

export default {
  name: "DataChart",
  data() {
    return {
      chartOptions: {
        scales: {
          x: {
            type: "time",
          },
          y: {
            beginAtZero: true,
          },
        },
      },

      chartConfig: {
        type: "line",
        data: this.plotData,
        options: {},
      },

      myChart: {},
    };
  },
  props: {
    plotData: {
      type: Object,
      required: true,
      default() {
        return {
          start: {},
          end: {},
          datasets: [],
        };
      },
    },

    xLabelsNumber: {
      type: Number,
      required: false,
      default: 5,
    },
  },

  computed: {
    dividedLabels() {
      const result = [this.plotData.start];
      const delta = Math.round(
        (this.plotData.end - this.plotData.start) / this.xLabelsNumber
      );

      for (let i = 1; i < this.xLabelsNumber - 1; i++)
        result.push(this.plotData.start + delta * i);

      result.push(this.plotData.end);

      for (const x of result) console.log(new Date(x));
      return result;
    },
  },
  mounted() {
    console.log("blasdasdas", this.plotData);

    // const a = [
    //   {
    //     x: "2022-01-08T18:18:28.688Z",
    //     y: "47.260",
    //   },
    //   {
    //     x: "2022-01-08T18:18:13.689Z",
    //     y: "16.283",
    //   },
    //   {
    //     x: "2022-01-08T18:17:58.676Z",
    //     y: "15.787",
    //   },
    //   {
    //     x: "2022-01-08T18:17:28.695Z",
    //     y: "94.757",
    //   },
    //   {
    //     x: "2022-01-08T18:16:16.686Z",
    //     y: "66.763",
    //   },
    //   {
    //     x: "2022-01-08T18:15:58.675Z",
    //     y: "49.125",
    //   },
    //   {
    //     x: "2022-01-08T18:15:22.689Z",
    //     y: "11.375",
    //   },
    //   {
    //     x: "2022-01-08T18:14:28.683Z",
    //     y: "1.335",
    //   },
    //   {
    //     x: "2022-01-08T18:13:28.692Z",
    //     y: "50.987",
    //   },
    //   {
    //     x: "2022-01-08T18:11:43.693Z",
    //     y: "9.375",
    //   },
    //   {
    //     x: "2022-01-08T18:11:40.676Z",
    //     y: "84.773",
    //   },
    //   {
    //     x: "2022-01-08T18:10:43.675Z",
    //     y: "66.786",
    //   },
    //   {
    //     x: "2022-01-08T18:09:34.689Z",
    //     y: "16.998",
    //   },
    //   {
    //     x: "2022-01-08T18:08:31.684Z",
    //     y: "86.079",
    //   },
    //   {
    //     x: "2022-01-08T18:08:25.688Z",
    //     y: "57.386",
    //   },
    //   {
    //     x: "2022-01-08T18:07:40.691Z",
    //     y: "87.723",
    //   },
    //   {
    //     x: "2022-01-08T18:07:37.687Z",
    //     y: "16.310",
    //   },
    //   {
    //     x: "2022-01-08T18:05:13.678Z",
    //     y: "98.267",
    //   },
    //   {
    //     x: "2022-01-08T18:04:19.673Z",
    //     y: "24.516",
    //   },
    //   {
    //     x: "2022-01-08T18:04:10.688Z",
    //     y: "69.118",
    //   },
    //   {
    //     x: "2022-01-08T18:03:31.691Z",
    //     y: "60.019",
    //   },
    //   {
    //     x: "2022-01-08T18:02:40.694Z",
    //     y: "79.948",
    //   },
    //   {
    //     x: "2022-01-08T18:01:31.687Z",
    //     y: "75.775",
    //   },
    //   {
    //     x: "2022-01-08T17:59:25.687Z",
    //     y: "22.855",
    //   },
    //   {
    //     x: "2022-01-08T17:59:04.690Z",
    //     y: "60.675",
    //   },
    //   {
    //     x: "2022-01-08T17:57:40.696Z",
    //     y: "58.506",
    //   },
    //   {
    //     x: "2022-01-08T17:57:13.674Z",
    //     y: "14.100",
    //   },
    //   {
    //     x: "2022-01-08T17:56:55.689Z",
    //     y: "97.270",
    //   },
    //   {
    //     x: "2022-01-08T17:55:52.690Z",
    //     y: "8.542",
    //   },
    //   {
    //     x: "2022-01-08T17:52:58.689Z",
    //     y: "73.218",
    //   },
    //   {
    //     x: "2022-01-08T17:51:58.674Z",
    //     y: "96.360",
    //   },
    //   {
    //     x: "2022-01-08T17:51:37.674Z",
    //     y: "66.065",
    //   },
    //   {
    //     x: "2022-01-08T17:51:07.690Z",
    //     y: "91.787",
    //   },
    //   {
    //     x: "2022-01-08T17:49:07.689Z",
    //     y: "23.613",
    //   },
    //   {
    //     x: "2022-01-08T17:46:55.691Z",
    //     y: "84.701",
    //   },
    //   {
    //     x: "2022-01-08T17:46:46.713Z",
    //     y: "42.375",
    //   },
    //   {
    //     x: "2022-01-08T17:46:37.689Z",
    //     y: "79.462",
    //   },
    //   {
    //     x: "2022-01-08T17:46:10.687Z",
    //     y: "85.937",
    //   },
    //   {
    //     x: "2022-01-08T17:45:37.676Z",
    //     y: "63.581",
    //   },
    //   {
    //     x: "2022-01-08T17:44:25.693Z",
    //     y: "4.627",
    //   },
    //   {
    //     x: "2022-01-08T17:44:13.702Z",
    //     y: "76.272",
    //   },
    //   {
    //     x: "2022-01-08T17:43:25.682Z",
    //     y: "76.567",
    //   },
    //   {
    //     x: "2022-01-08T17:42:19.690Z",
    //     y: "84.487",
    //   },
    //   {
    //     x: "2022-01-08T17:41:34.688Z",
    //     y: "10.384",
    //   },
    //   {
    //     x: "2022-01-08T17:41:19.691Z",
    //     y: "60.867",
    //   },
    //   {
    //     x: "2022-01-08T17:40:49.690Z",
    //     y: "69.788",
    //   },
    //   {
    //     x: "2022-01-08T17:39:52.688Z",
    //     y: "85.784",
    //   },
    //   {
    //     x: "2022-01-08T17:39:40.689Z",
    //     y: "28.165",
    //   },
    //   {
    //     x: "2022-01-08T17:38:37.691Z",
    //     y: "25.849",
    //   },
    //   {
    //     x: "2022-01-08T17:37:58.690Z",
    //     y: "87.898",
    //   },
    //   {
    //     x: "2022-01-08T17:37:10.690Z",
    //     y: "62.919",
    //   },
    //   {
    //     x: "2022-01-08T17:36:58.691Z",
    //     y: "78.432",
    //   },
    //   {
    //     x: "2022-01-08T17:35:13.690Z",
    //     y: "89.330",
    //   },
    //   {
    //     x: "2022-01-08T17:34:49.694Z",
    //     y: "36.984",
    //   },
    //   {
    //     x: "2022-01-08T17:34:13.689Z",
    //     y: "61.421",
    //   },
    //   {
    //     x: "2022-01-08T17:32:34.688Z",
    //     y: "83.292",
    //   },
    //   {
    //     x: "2022-01-08T17:31:31.684Z",
    //     y: "82.702",
    //   },
    //   {
    //     x: "2022-01-08T17:29:43.684Z",
    //     y: "1.264",
    //   },
    //   {
    //     x: "2022-01-08T17:29:16.692Z",
    //     y: "53.335",
    //   },
    //   {
    //     x: "2022-01-08T17:29:07.695Z",
    //     y: "78.336",
    //   },
    //   {
    //     x: "2022-01-08T17:28:37.692Z",
    //     y: "67.958",
    //   },
    //   {
    //     x: "2022-01-08T17:27:43.699Z",
    //     y: "69.465",
    //   },
    //   {
    //     x: "2022-01-08T17:27:22.693Z",
    //     y: "77.248",
    //   },
    //   {
    //     x: "2022-01-08T17:26:31.691Z",
    //     y: "98.710",
    //   },
    //   {
    //     x: "2022-01-08T17:25:46.691Z",
    //     y: "40.016",
    //   },
    //   {
    //     x: "2022-01-08T17:25:22.694Z",
    //     y: "22.771",
    //   },
    //   {
    //     x: "2022-01-08T17:23:55.697Z",
    //     y: "84.006",
    //   },
    //   {
    //     x: "2022-01-08T17:23:46.691Z",
    //     y: "53.927",
    //   },
    //   {
    //     x: "2022-01-08T17:23:22.691Z",
    //     y: "59.785",
    //   },
    //   {
    //     x: "2022-01-08T17:23:13.696Z",
    //     y: "68.097",
    //   },
    //   {
    //     x: "2022-01-08T17:23:07.699Z",
    //     y: "55.099",
    //   },
    //   {
    //     x: "2022-01-08T17:22:40.692Z",
    //     y: "11.514",
    //   },
    //   {
    //     x: "2022-01-08T17:22:37.692Z",
    //     y: "64.887",
    //   },
    //   {
    //     x: "2022-01-08T17:21:43.692Z",
    //     y: "89.323",
    //   },
    //   {
    //     x: "2022-01-08T17:20:01.692Z",
    //     y: "33.805",
    //   },
    //   {
    //     x: "2022-01-08T17:19:31.691Z",
    //     y: "86.983",
    //   },
    //   {
    //     x: "2022-01-08T17:18:34.692Z",
    //     y: "80.594",
    //   },
    //   {
    //     x: "2022-01-08T17:16:34.695Z",
    //     y: "11.102",
    //   },
    //   {
    //     x: "2022-01-08T17:15:31.693Z",
    //     y: "67.763",
    //   },
    //   {
    //     x: "2022-01-08T17:15:07.693Z",
    //     y: "40.854",
    //   },
    //   {
    //     x: "2022-01-08T17:14:28.698Z",
    //     y: "7.177",
    //   },
    //   {
    //     x: "2022-01-08T17:12:49.676Z",
    //     y: "48.485",
    //   },
    //   {
    //     x: "2022-01-08T17:12:31.692Z",
    //     y: "19.628",
    //   },
    //   {
    //     x: "2022-01-08T17:12:22.698Z",
    //     y: "98.390",
    //   },
    //   {
    //     x: "2022-01-08T17:12:19.690Z",
    //     y: "91.494",
    //   },
    //   {
    //     x: "2022-01-08T17:12:04.694Z",
    //     y: "15.863",
    //   },
    //   {
    //     x: "2022-01-08T17:12:01.701Z",
    //     y: "14.293",
    //   },
    //   {
    //     x: "2022-01-08T17:11:22.694Z",
    //     y: "25.738",
    //   },
    //   {
    //     x: "2022-01-08T17:10:55.692Z",
    //     y: "10.506",
    //   },
    //   {
    //     x: "2022-01-08T17:10:28.678Z",
    //     y: "34.991",
    //   },
    //   {
    //     x: "2022-01-08T17:09:10.680Z",
    //     y: "1.900",
    //   },
    //   {
    //     x: "2022-01-08T17:07:34.678Z",
    //     y: "70.729",
    //   },
    //   {
    //     x: "2022-01-08T17:06:40.698Z",
    //     y: "30.885",
    //   },
    //   {
    //     x: "2022-01-08T17:05:40.695Z",
    //     y: "63.818",
    //   },
    //   {
    //     x: "2022-01-08T17:03:10.696Z",
    //     y: "49.157",
    //   },
    //   {
    //     x: "2022-01-08T17:00:58.700Z",
    //     y: "0.867",
    //   },
    //   {
    //     x: "2022-01-08T17:00:52.678Z",
    //     y: "3.398",
    //   },
    //   {
    //     x: "2022-01-08T16:59:58.691Z",
    //     y: "80.479",
    //   },
    //   {
    //     x: "2022-01-08T16:59:52.706Z",
    //     y: "27.724",
    //   },
    //   {
    //     x: "2022-01-08T16:59:25.684Z",
    //     y: "2.838",
    //   },
    //   {
    //     x: "2022-01-08T16:56:46.692Z",
    //     y: "83.637",
    //   },
    //   {
    //     x: "2022-01-08T16:56:34.699Z",
    //     y: "87.197",
    //   },
    //   {
    //     x: "2022-01-08T16:56:10.682Z",
    //     y: "40.847",
    //   },
    //   {
    //     x: "2022-01-08T16:54:04.719Z",
    //     y: "70.565",
    //   },
    //   {
    //     x: "2022-01-08T16:53:40.710Z",
    //     y: "31.497",
    //   },
    //   {
    //     x: "2022-01-08T16:53:19.707Z",
    //     y: "71.458",
    //   },
    //   {
    //     x: "2022-01-08T16:52:40.706Z",
    //     y: "57.749",
    //   },
    //   {
    //     x: "2022-01-08T16:51:52.696Z",
    //     y: "12.967",
    //   },
    //   {
    //     x: "2022-01-08T16:50:46.707Z",
    //     y: "72.201",
    //   },
    //   {
    //     x: "2022-01-08T16:50:25.716Z",
    //     y: "91.326",
    //   },
    // ];

    this.myChart = new Chart(document.getElementById("dataseries-chart"), {
      type: "line",
      data: {
        datasets: this.plotData.datasets,
        labels: this.dividedLabels,
      },
      options: {
        scales: {
          x: {
            type: "time",
            time: {
              unit: "second",
              displayFormats: {
                second: "D H:mm:ss",
              },
            },
            ticks: {
              source: "labels",
            },
          },
        },
      },
    });
  },
};
</script>

<style scoped></style>
